<html>
    <head>
        <title>img2gco</title>
        <style>
            * {
                font-family: sans-serif;
            }
            body {
                max-width: 1000px;
                margin: auto;
                padding: 10px 0px;
            }
            /* Title */
            td:nth-child(1) {
                font-weight: bold;
                width: 300px;
            }
            /* Explanation */
            td:nth-child(3) {
                color: #777;
                font-size: smaller;
            }
            td {
                padding: 2px;
                margin: 0px;
            }
            tr:nth-child(odd) {
                background: #f2f2f2;
            }
            table {
                border-spacing: 0px;
            }
            p {
                background: #f2f2f2;
                padding: 5px;
                margin-bottom: 5px;
            }
            input[type = submit] {
                color: #fff;
                background: #cc3300;
                border: none;
                padding: 10px 50px;
                margin: auto;
                display: block;
                margin-top: 10px;
            }
        </style>
    </head>
    <body>
        <h1>img2gco</h1>
        <form method="post" action="gcode.php" enctype="multipart/form-data">
            <table>
                <tr>
                    <td>Laser Min Power [0-255]</td>
                    <td><input type="text" value="40" name="LaserMin" size="8"/></td>
                    <td>This is the laser power that corresponds to WHITE. Set it just below where it makes a mark on your given material</td>
                </tr>
                <tr>
                    <td>Laser Max Power [0-255]</td>
                    <td><input type="text" value="250" name="LaserMax" size="8"/></td>
                    <td>This is the laser power that corresponds to BLACK. Set it to a level where it makes a nice black mark and where increasing power does not make the mark any darker</td>
                </tr>
                <tr>
                    <td>Laser 'Off' Power [0-255]</td>
                    <td><input type="text" value="0" name="LaserOff" size="8"/></td>
                    <td>This is the laser power that will not mark the wood at all, even if it just sits there. Usually this is the bare minimum that your PWM board will respond to.</td>
                </tr>
                <tr>
                    <td>Skip over values above [0-255]</td>
                    <td><input type="text" value="253" name="whiteLevel" size="8"/></td>
                    <td>This defines the white level. In a JPEG the white level probably contains some compression artifacts so you might have to go down to 252 or so. PNG images should have white at 255 so 254 is a good value.</td>
                </tr>
                <tr>
                    <td>Travel rate [mm/min]</td>
                    <td><input type="text" value="3000" name="travelRate" size="8"/></td>
                    <td>Slewing between places speed.</td>
                </tr>
                <tr>
                    <td>Scan rate [mm/min]</td>
                    <td><input type="text" value="2000" name="feedRate" size="8"/></td>
                    <td>Speed to move while lasering. This is usually limited by the commands per second rate of your firmware, you can go faster from an SDcard than over USB. You will need to find this speed, and note that the power levels will need tweaked if this speed is changed.</td>
                </tr>
                <tr>
                    <td>Overscan Distance [mm]</td>
                    <td><input value="3" type="text" name="overScan" size="8"/></td>
                    <td>This sets a 'blank' distance before the start of the line to give the belts time to settle down and the motors to reach constant speed.</td>
                </tr>
                <tr>
                    <td>Height [mm]</td>
                    <td><input value="50" type="text" name="sizeY" size="8"/></td>
                    <td>Set the height, the script will autosize the width</td>
                </tr>
                <tr>
                    <td>Horizontal Resolution [mm/pixel]</td>
                    <td><input value="0.1" type="text" name="resX" size="8"/></td>
                    <td>mm between pixels. If you make this larger you can attain faster speeds, but at the price of some detail loss. 0.1 is really amazing 0.15 is nearly so. 0.2 starts to look a little fuzzy. Beyond that you will probably see pixelization.</td>
                </tr>
                <tr>
                    <td>Scangap [mm/line]</td>
                    <td><input type="text" value="0.1" name="scanGap" size="8"/></td>
                    <td>This is the distance between lines which is a function of your laser spot size. You need to make this small enough so there aren't visible unburned lines. For my laser this is 0.05 though I can usually get away with 0.075 because its faster. 0.1 leaves visible lines, which is kind of a cool effect. You can try to defocus your laser to make thicker lines for shorter overall total time, but you will have to increase your power. Note that if lines start to overlap you might need to bring your power down slightly.</td>
                </tr>
                <tr>
                    <td>Start X [mm]</td>
                    <td><input value="0" type="text" name="offsetX" size="8"/></td>
                    <td>X value to start image from. The laser will start here and move in the positive direction as it scans. Corresponds to the <strong>top right</strong> of the image.</td>
                </tr>
                <tr>
                    <td>Start Y [mm]</td>
                    <td><input value="0" type="text" name="offsetY" size="8"/></td>
                    <td>Y value to start image from. The laser will start here and move in the positive direction as it scans. Corresponds to the <strong>top right</strong> of the image.</td>
                </tr>
                <tr>
                    <td>Image File</td>
                    <td><input type="file" accept="image/*" name="image" id="image" /></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Gcode flavour</td>
                    <td>
                        <input type="radio" name="code" value="grbl" checked="checked" > GRBL
                        <input type="radio" name="code" value="reprap"> Reprap
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td>Output</td>
                    <td>
                        <input type="radio" name="preview" value="0" checked="checked" > Gcode
                        <input type="radio" name="preview" value="1"> Grayscale Preview
                    </td>
                    <td></td>
                </tr>
            </table>
            <input type="submit" value='Go!' />
        </form>
        <p>
            <b>About this tool:</b>
            This tool was created because I could not find any useable image to gcode converters suitable for lasers based on grbl.
            <a href="http://wiki.nebarnix.com/wiki/Img2gco">Full Documentation</a>
        </p>
        <p>
            <b>A note on commands per second:</b>
            My grbl can handle quite a lot of commands per so that I can run at least 330 commands per second over USB.
            This strongly depends on the gCode sender which is system speed dependant if not pulled from an SD card.
            Please don't do anything major on your system while an image is engraved.
            It can leave ugly marks on your piece when the laser head suddenly stalls because it waits
            for the next command and the buffer ran empty. This is also a possible cause for fire!
        </p>
    </body>
</html>
